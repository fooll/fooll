<!DOCTYPE html><html lang="en"><head><title>ZinkyJS:Documentations</title><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content=""><meta name="author" content=""><link rel="shortcut icon" href="/zinky/images/icon.png"><link href="https://fonts.googleapis.com/css?family=Josefin+Sans:700|Ubuntu+Mono" rel="stylesheet"><link rel="stylesheet" href="./css/prism.css"><!-- PURE CSS--><link rel="stylesheet" href="./bower_components/pure/pure-min.css"><link rel="stylesheet" href="./bower_components/pure/grids-responsive-min.css"><!-- Plugins CSS--><link rel="stylesheet" href="./bower_components/font-awesome/css/font-awesome.css"><link rel="stylesheet" href="./bower_components/mdi/css/materialdesignicons.min.css"><!-- Theme CSS--><link id="theme-style" rel="stylesheet" href="./css/style.css"></head><body><div class="lateral-page"><div class="header"><a class="header-logo" href="/zinky/"><img class="header-logo-img" src="images/logo-white.png"><div class="header-logo-title">ZinkyJS</div></a><div class="flex"></div><div id="nav"><div class="menu-hor menu"><a class="menu-item" href="/zinky/tutorial1.html"><i class="fa fa-road"> </i> Tutorial</a><a class="menu-item" href="/zinky/docs.html"><i class="fa fa-book"> </i> Docs</a><a class="menu-item" href="https://github.com/zinkyjs/zinky"> <i class="fa fa-github"> </i> Github</a><a class="menu-item" href="https://github.com/zinkyjs/zinky/issues"><i class="fa fa-exclamation-circle"></i> Support</a></div></div></div><div class="doc-wrapper"><div class="doc-header"><div class="doc-title"><i class="icon fa fa-book"></i> Documentations</div><div class="meta"><i class="fa fa-clock-o"></i> Last updated: 19 - 12 - 2017 </div></div><div class="scrollable absolute-menu" id="menu-wrapper"><ul class="menu" id="content-menu"><li><a data-scroll href="#server-section">Zinky (server) API</a><ul class="nav doc-sub-menu"><li><a data-scroll href="#server-constructor">constructor</a></li><li><a data-scroll href="#server-listen">listen</a></li><li><a data-scroll href="#server-addhook">addHook</a></li><li><a data-scroll href="#server-modules">modules</a></li></ul></li><li><a data-scroll href="#zinko-section">Zinko (module) API</a><ul class="nav doc-sub-menu"><li><a data-scroll href="#zinko-tree">tree</a></li><li><a data-scroll href="#zinko-index">index.js</a></li><li><a data-scroll href="#zinko-views">views</a></li><li><a data-scroll href="#zinko-client">client (static files)</a></li></ul></li><li><a data-scroll href="#req-section">req API</a><ul class="nav doc-sub-menu"><li><a data-scroll href="#req-modulename">moduleName</a></li><li><a data-scroll href="#req-action">action</a></li><li><a data-scroll href="#req-operation">operation</a></li><li><a data-scroll href="#req-params">params</a></li><li><a data-scroll href="#req-query">query</a></li><li><a data-scroll href="#req-app">app</a></li><li><a data-scroll href="#req-modules">modules</a></li></ul></li><li><a data-scroll href="#res-section">res API</a><ul class="nav doc-sub-menu"><li><a data-scroll href="#res-render">render</a></li><li><a data-scroll href="#res-redirect">redirect</a></li><li><a data-scroll href="#res-json">json</a></li><li><a data-scroll href="#res-status">status</a></li><li><a data-scroll href="#res-contenttype">contentType</a></li><li><a data-scroll href="#res-deliver">deliver</a></li><li><a data-scroll href="#res-reload">reload</a></li><li><a data-scroll href="#res-cookie">cookie</a></li><li><a data-scroll href="#res-clearcookies">clearCookies</a></li></ul></li><li><a data-scroll href="#cli-section">zinky-cli</a><ul><li><a data-scroll href="#cli-install">Installation</a></li><li><a data-scroll href="#cli-gen_app">Generate App</a></li><li><a data-scroll href="#cli-gen_module">Generate Module</a></li></ul></li></ul></div><div class="doc-content"><br><br><section class="doc-section" id="intro-section"><div class="section-block">It's recommanded to check this <a href="/zinky/tutorial1.html">quick tutorial</a>, in order to get an idea on <ZinkyJS></ZinkyJS> basics.</div></section><section class="doc-section" id="server-section"><h2 class="section-title">Zinky class (server) API</h2><div class="section-block" id="server-constructor"><h3>Constructor</h3><p>The simplest way to create a <span class="ht">Zinky</span> instance is this:</p><pre><code class="language-javascript">const Zinky = require('zinky');
var app = new Zinky();</code></pre><p>This will use the default option values of <span class="ht">Zinky</span>, however you can customize the app configuration by passing an object argument with this options:</p><h4>Constructor Options</h4><div class="sub-section"><h5>port</h5><p>The port on which the app will listen. <i>Default: 3000</i></p><p>Eg:</p><pre><code class="language-javascript">const Zinky = require('zinky');
var app = new Zinky({
  port: 8080 // The sever will listen on port 8080
});</code></pre><h5>env</h5><p>The project environment. <i>Default: 'development'</i></p><p>Eg:</p><pre><code class="language-javascript">const Zinky = require('zinky');
var app = new Zinky({
  env: 'production'
});</code></pre><h5>aliases</h5><p>Aliases gives you the possiblity to edit module names in route. <i>Default: {}</i></p><p>For example, imagine you have a module <span class="ht">auth</span> in which you have <span class="ht">GET_dosomething</span>, normally this function is called when a you request <span class="ht">get</span> to <span class="ht">/auth/dosomething</span>.</p><p>Now, if you want to change the word <span class="ht">auth</span> only in route without changing the module name so you can call the same function with a request to <span class="ht">/sign/dosomething</span>, you'll have to write this simple line:</p><p>Eg:</p><pre><code class="language-javascript">const Zinky = require('zinky');
var app = new Zinky({
  aliases: {
    'sign': 'auth' // Now, everytime you request 'sign' module, zinky will understand that you mean 'auth'
  }
});</code></pre><p>The <span class="ht">aliases</span> option is especially useful when you want to attach a module to the app root.</p><p id="root-aliases">For example, you want to run the module home when the user requests www.mysite.com, you just have to do:</p><pre><code class="language-javascript">const Zinky = require('zinky');
var app = new Zinky({
  aliases: {
    '': 'home' // Now when you request: get www.mysite.com, Zinky will look for GET_root(req, res) in home module.
  }
});</code></pre><h5>notFoundView</h5><p>The html returned when the requested action does not exist. <i>Default: '&lt;h1&gt;404 Not Found&lt;/h1&gt;'</i></p><p>Eg:</p><pre><code class="language-javascript">const Zinky = require('zinky');
var app = new Zinky({
  notFoundView: '&lt;div class=&quot;myclass&quot;&gt; This page does not exist in this website&lt;/div&gt;'
});</code></pre><h5>internalErrorMsg</h5><p>The message to return when an internal server error occurs. <i>Default: 'Internal Server Error'</i></p><p>Eg:</p><pre><code class="language-javascript">const Zinky = require('zinky');
var app = new Zinky({
  internalErrorMsg: 'Ooops an error has occured in server'
});</code></pre><h5>staticFolder</h5><p>The path to folder that contains served static files. <i>Default: 'public'</i></p><p>Eg:</p><pre><code class="language-javascript">const Zinky = require('zinky');
var app = new Zinky({
  staticFolder: 'assets' // Zinky will serve the files in 'assets' folder.
});</code></pre><h5>staticModuleName</h5><p>By default, when you want to get a file from the static folder, you request <span class="ht">/file/example.ext</span>. If you want to change <span class="ht">file</span> by something else you'll have to have to mention it in this option. <i>Default: 'file'</i></p><p>Eg:</p><pre><code class="language-javascript">const Zinky = require('zinky');
var app = new Zinky({
  staticModuleName: 'statics' // Now if you request '/statics/example.ext' Zinky will look for it in 'public' folder.
});</code></pre><h5>extra</h5><p>Here you can put anything you want.<i>Default: {}</i></p><p>Eg:</p><pre><code class="language-javascript">const Zinky = require('zinky');
var app = new Zinky({
  extra: {
    message: 'My extra data'
  }
});</code></pre></div></div><div class="section-block" id="server-listen"> <h3>listen(#port*)</h3><p>Start to listen on #port*.</p><p>If #port* is provided it will overwrite the existing <span class="ht">app.port</span>.</p><p>Eg:</p><pre><code class="language-javascript">const Zinky = require('zinky');
var app = new Zinky();
app.listen() // app will listen on port 3000</code></pre><pre><code class="language-javascript">const Zinky = require('zinky');
var app = new Zinky();
app.listen(8080) // app will listen on port 8080</code></pre><pre><code class="language-javascript">const Zinky = require('zinky');
var app = new Zinky({
  port: 2000
});
app.listen() // app will listen on port 2000</code></pre><pre><code class="language-javascript">const Zinky = require('zinky');
var app = new Zinky({
  port: 2000
});
app.listen(4000) // app will listen on port 4000</code></pre></div><div class="section-block" id="server-addhook"> <h3>addHook(hook())</h3><p>Hooks are a serie of successive functions that run before any request action.</p><p>Eg:</p><pre><code class="language-javascript">const Zinky = require('zinky');
var app = new Zinky();
app.addHook((req, res, next) => {
  console.log('I am a hoooooook');
  next();
}) // Now, everytime you have a request you'll see 'I am a hoooooook' in the console.</code></pre><p>Of course, you can use <span class="ht">Express</span> middlewares as hooks without any problem.</p></div><div class="section-block" id="server-modules"> <h3>modules</h3><p><span class="ht">app.modules</span> contains all the application modules with their methods and views...</p></div></section><section class="doc-section" id="zinko-section"><h2 class="section-title">Zinko (app module) API</h2><div class="section-block" id="zinko-tree"> <p>This is how a basic module looks like:</p><pre><code class="language-markup">module
  |_ client
  |_ views
  |_ index.js</code></pre></div><div class="section-block" id="zinko-index"><h3>index.js</h3><p>This is the simplest index.js of a module.</p><pre><code class="language-javascript">const Zinko = require('zinko');
 
class ModuleName extends Zinko {
 
  GET_root(req, res) {
    res.end('You are in module home page');
  }
 
}
 
module.exports = ModuleName;</code></pre><p>Let's explain it:</p><h4>Inheritance</h4><pre><code class="language-javascript">const Zinko = require('zinko');
 
class ModuleName extends Zinko</code></pre><p>Here we extended our module to <span class="ht">Zinko</span> class.</p><p>Of course, you can extend your class to some other class but keep in mind that <span class="ht">Zinko</span> should be the top most one.</p><p>Eg:</p><pre><code class="language-javascript">class Auth extends Zinko</code></pre><p>Then you can do:</p><pre><code class="language-javascript">class SocialAuth extends Auth</code></pre><h4>Routing</h4><p>Using <span class="ht">Zinky</span> framework, you don't need routes configuration. However it follows a convention that makes it easy to know what action is done for any given route.</p><p>The convention is:</p><pre><code class="language-markup">/moduleName/action/params[0]/params[1]/params[2]/...</code></pre><p>Eg:</p><p><span class="ht">POST</span> to: <span class="ht">/auth/login/omar/123456</span></p><p>And to handle this request add this method to <span class="ht">app_modules/auth/index.js</span>:</p><pre><code class="language-javascript">POST_login(req, res) {
  req.params[0] // omar
  req.params[1] // 123456
}</code></pre><h5>Module's root</h5><p>Imagine now you want to GET a module's root, you'll request this: <span class="ht">/auth/</span></p><p>And to handle this request add this method to <span class="ht">app_modules/auth/index.js</span>:</p><pre><code class="language-javascript">GET_root(req, res) {
  res.end("This is the auth's root")
}</code></pre><p>You can do the same thing with <span class="ht">POST</span>, <span class="ht">PUT</span>, <span class="ht">PATCH</span>...</p><h5>Before Hooks</h5><p>It is possible to attach hooks to a single action (route) by using <span class="ht">BEFORE_</span>.</p><p>Eg:</p><p>You have a module named <span class="ht">comment</span> in which you have <span class="ht">POST_root</span>, so you add this method to <span class="ht">app_modules/auth/index.js</span>:</p><pre><code class="language-javascript">BEFORE_comment_POST_root(req, res, next) {
  console.log("You posted a request to /comment/ but i'm running before it");
  next();
}</code></pre><p>It is possible to attach many before hooks to one single action.</p><h5>After Hooks</h5><p>Imagine you want to run something after an action, in another module, has been sent. You can use the after hooks.</p><p>Eg:</p><p>You have a module named <span class="ht">comment</span> in which you have <span class="ht">POST_root</span>, so you add this method to <span class="ht">app_modules/auth/index.js</span>:</p><pre><code class="language-javascript">AFTER_comment_POST_root(req, res) {
  console.log("The post request to /comment/ has received a response, now it's me who's running");
}</code></pre><h5>Module Hook</h5><p>This type of hook is called before every action of the module.</p><p>Eg:</p><pre><code class="language-javascript">const Zinko = require('zinko');

class Admin extends Zinko {
 
  hook(req, res, next) {
    if(req.user.role == "admin") next();
    else res.deliver(403, 'action forbidden');
  }

  GET_root(req, res) {
    // hook is called before this;
  }

  POST_root(req, res) {
    // hook is called before this too;
  }

}      </code></pre></div><div class="section-block" id="zinko-views"><h3>Views</h3><p><span class="ht">Zinko</span> uses <a href="https://www.npmjs.com/package/pug-layout">pug-layout</a> to handle its views.</p><p>Module's views are stored in views folder.</p><p>Then you'll find the views in <span class="ht">views</span> object in module class.</p><p>Eg:</p><pre><code class="language-markup">app_modules
  |_ auth
    |_ views
      |_ main.pug
    |_ index.js</code></pre><h6>main.pug</h6><pre><code class="language-jade">h1 Auth module main page</code></pre><h6>index.js</h6><pre><code class="language-javascript">const Zinko = require('zinko');
 
class Auth extends Zinko {
 
  GET_root(req, res) {
    var html = this.views.main.render();
    res.end(html);
  }
 
}
 
module.exports = Auth;</code></pre><p>Now, if you visit <span class="ht">/auth/</span> you'll get <span class="ht">main.pug</span>'s content.</p><h4>Pages & Layouts</h4><p>Views are by default read as Pages(see <a href="https://www.npmjs.com/package/pug-layout">pug-layout docs</a>), If you want them to be considered layouts, just start the view file name with <span class="ht">L_</span>.</p><p>Eg:</p><pre><code class="language-markup">app_modules
  |_ auth
    |_ views
      |_ main.pug
      |_ L_layout.pug
    |_ index.js</code></pre><h6>L_layout.pug</h6><pre><code class="language-jade">html
  body
    header
      My Awesome Website
    block content</code></pre><h6>main.pug</h6><pre><code class="language-jade">block content
  h1 Auth module main page</code></pre><h6>index.js</h6><pre><code class="language-javascript">const Zinko = require('zinko');
 
class Auth extends Zinko {
 
  GET_root(req, res) {
    var layout = this.views.L_layout;
    this.views.main.extends(layout);
    var html = this.views.main.render();
    res.end(html);
    // Or a better way to do all what you saw above is:
    // res.render(this.views.main, {}, this.views.L_layout);
  }
 
}
 
module.exports = Auth;</code></pre></div><div class="section-block" id="zinko-client"><h3>client (static files)</h3><p><span class="ht">client</span> folder contains all the served static files of your module, They are accessed from <span class="ht">file</span> action.</p><p>Eg:</p><pre><code class="language-markup">app_modules
  |_ auth
    |_ client
      |_ img
         |_ logo.png
    |_ views
      |_ main.pug
    |_ index.js</code></pre><p>In order to get <span class="ht">logo.png</span> use this route: <span class="ht">/auth/file/img/logo.png</span>.</p><h6>maing.pug</h6><pre><code class="language-jade">img(src="/auth/file/img/logo.png")</code></pre><p><div class="callout-block callout-warning"><div class="icon-holder"><i class="fa fa-exclamation-triangle"></i></div><div class="content"><div class="callout-title">About root aliased module's files</div><p>If the module is aliased to app root (see <a href="#root-aliases">this</a>), you'll still have to write the module's name in order to get its files, so you write <span class="ht">/modulename/file/myfile.ext</span>, instead of <span class="ht">/file/myfile.ext</span>.</p></div></div></p></div></section><section class="doc-section" id="req-section"><h2 class="section-title">req API</h2><div class="section-block" id="req-modulename"><h3>req.moduleName</h3><p>The requested module name.</p><pre><code class="language-javascript">GET /auth/login/omar/123456?remember=1
// req.moduleName = 'auth'</code></pre></div><div class="section-block" id="req-action"><h3>req.action</h3><p>The requested action name.</p><pre><code class="language-javascript">GET /auth/login/omar/123456?remember=1
// req.action = 'login'</code></pre></div><div class="section-block" id="req-operation"><h3>req.operation</h3><p>The function name that will be called on this request.</p><pre><code class="language-javascript">GET /auth/login/omar/123456?remember=1
// req.operation = 'GET_login'</code></pre></div><div class="section-block" id="req-params"><h3>req.params</h3><p>The request params.</p><pre><code class="language-javascript">GET /auth/login/omar/123456?remember=1
// req.params = ['omar', '123456']</code></pre></div><div class="section-block" id="req-query"><h3>req.query</h3><p>The request GET params.</p><pre><code class="language-javascript">GET /auth/login/omar/123456?remember=1
// req.query = {remember: 1}</code></pre></div><div class="section-block" id="req-app"><h3>req.app<span class="title-comment">// or req.A</span></h3><p>the app object</p></div><div class="section-block" id="req-modules"><h3>req.app.modules<span class="title-comment">// or req.app.mds</span></h3><p>The app modules.</p><pre><code class="language-javascript">GET_root(req, res) {
  req.app.mds.theOtherModuleName.someMethod(args);
}</code></pre></div></section><section class="doc-section" id="res-section"><h2 class="section-title">res API</h2><div class="section-block" id="res-render"><h3>res.render(pugLayout.Page view, {locals}, pugLayout.Layout layout*)</h3><p>Responds with rendered view.</p><pre><code class="language-javascript">res.render(this.views.index, {title:'Home Page'}, this.views.L_layout);</code></pre></div><div class="section-block" id="res-redirect"><h3>res.redirect('location')</h3><p> Redirects to given url.</p><pre><code class="language-javascript">res.redirect('/');</code></pre></div><div class="section-block" id="res-json"><h3>res.json({obj})</h3><p> Responds with json object.</p><pre><code class="language-javascript">res.json({id: 50, username: 'omar'});</code></pre></div><div class="section-block" id="res-status"><h3>res.status(#code)</h3><p> Sets the HTTP status for the response.</p><pre><code class="language-javascript">res.status(400);</code></pre></div><div class="section-block" id="res-contenttype"><h3>res.contentType('contentType')</h3><p> Sets the HTTP content-type for the response.</p><pre><code class="language-javascript">res.contentType('text/html');
// equivalent to res.setHeader('Content-Type', 'text/html');</code></pre></div><div class="section-block" id="res-deliver"><h3>res.deliver(#status, 'response')</h3><p> Sends the response with the given HTTP status.</p><pre><code class="language-javascript">res.deliver(401, 'Sorry! you are not authorized to do that');</code></pre></div><div class="section-block" id="res-reload"><h3>res.reload()</h3><p> Redirects back to the URL specified in the Referer header.</p><pre><code class="language-javascript">res.reload();</code></pre></div><div class="section-block" id="res-cookie"><h3>res.cookie('name', val, {options})</h3><p> Sets a cookie.</p><pre><code class="language-javascript">res.cookie('lang', 'ar', { maxAge: 30758400000, httpOnly: true });</code></pre></div><div class="section-block" id="res-clearOneCookie"><h3>res.clearOneCookie('name')</h3><p> Clears a cookie.</p><pre><code class="language-javascript">res.clearOneCookie('session');</code></pre></div><div class="section-block" id="res-clearcookies"><h3>res.clearCookies()</h3><p> Clears all cookies.</p><pre><code class="language-javascript">GET_logout(req, res) {
  res.clearCookies();
  res.redirect('/');
}</code></pre></div></section><section class="doc-section" id="cli-section"><h2 class="section-title">zinky-cli</h2><div class="section-block"><p><span class="ht">zinky-cli</span> is a cli tool for <span class="ht">ZinkyJS</span></p></div><div class="section-block" id="cli-install"><h3>Installation</h3><pre><code class="code-cli">npm i -g zinky-cli</code></pre></div><div class="section-block" id="cli-gen_app"><h3>Generate application boilerplate</h3><pre><code class="code-cli">zinky -a appName</code></pre><p>Or:</p><pre><code class="code-cli">zinky --create_app appName</code></pre></div><div class="section-block" id="cli-gen_module"><h3>Generate application module</h3><pre><code class="code-cli">zinky -M moduleName</code></pre><p>Or:</p><pre><code class="code-cli">zinky --app_module moduleName</code></pre></div></section></div></div></div><script src="./bower_components/smooth-scroll/dist/js/smooth-scroll.js"></script><script src="./bower_components/scrollbot/js/scrollbot.min.js"></script><script src="./js/prism.js"></script><script src="./js/main.js"></script></body></html>